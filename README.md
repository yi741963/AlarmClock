# 智慧鬧鐘系統 🔔

使用 .NET 9 和 WPF 建立的 Windows 11 智慧鬧鐘小工具，具備完整的 UI 編輯功能和 JSON 設定持久化。

## 功能特色

### 核心功能
- ⏰ **動態鬧鐘管理**
  - ➕ 新增無限數量的鬧鐘
  - ✏️ 編輯現有鬧鐘
  - 🗑️ 刪除鬧鐘
  - 🔔/🔕 快速啟用/停用切換
  - 📅 **週期設定**：可設定每週特定日期響鈴（例如：僅週一到週五響鈴）
  - 🎌 **國定假日排除**：可選擇排除台灣國定假日（春節、國慶日、清明節等）

- 🎯 **智慧響鈴邏輯**
  - 檢測使用者是否正在使用電腦
  - **有人使用時**：響鈴自訂秒數（1-60秒）後自動關閉
  - **無人使用時**：可設定持續響鈴時間（1-30分鐘）或永不停止（設為0）
  - 每個鬧鐘可獨立設定響鈴時間
  - ♾️ 支援無限響鈴模式，直到手動關閉

- 👤 **使用者活動檢測**
  - 即時監測鍵盤和滑鼠活動
  - 可自訂閒置閾值時間（10-300秒，透過全域設定調整）
  - UI 顯示當前使用者狀態（活躍中/閒置中）

- 🎵 **自訂音樂功能**
  - 支援上傳自訂鬧鐘音樂（MP3, WAV, WMA, M4A）
  - 檔案大小限制：5 MB
  - 自動管理音樂資料夾（`%AppData%\SmartAlarmClock\Music`）
  - 可選擇複製檔案或使用原始路徑
  - 未設定時使用系統預設音效
  - 🎚️ **音量控制**：每個鬧鐘可獨立設定音量大小（0-100%）

- ⚙️ **全域設定**
  - 可自訂使用者活躍判斷時間（10-300秒）
  - 可指定音樂資料夾路徑
  - 設定即時生效並自動儲存

- 💾 **JSON 設定持久化**
  - 自動儲存所有鬧鐘設定到 JSON 檔案
  - 應用程式重啟後自動載入設定
  - 設定檔位置：`%AppData%\SmartAlarmClock\alarm_config.json`

### UI 特色
- 🎨 現代化深色主題介面
- ⏱️ 大型時鐘顯示當前時間
- 📊 即時狀態更新
- 🔴 鬧鐘響起時顯示紅色警示
- 📱 直覺的編輯對話框
- 🎚️ 滑桿調整響鈴時間
- 🖼️ **系統匣最小化**：程式可最小化到系統匣背景執行
  - 自訂系統匣圖示（img/clock.png）
  - 雙擊系統匣圖示恢復視窗
  - 右鍵選單快速操作
  - 關閉視窗不會結束程式，而是最小化到系統匣

## 專案結構

```
AlarmClock/
├── AlarmService.cs           # 鬧鐘核心邏輯（含完整 XML 註解）
├── AlarmConfig.cs            # JSON 設定管理（含完整 XML 註解）
├── MusicManager.cs           # 音樂檔案管理（含完整 XML 註解）
├── TaiwanHolidays.cs         # 台灣國定假日管理
├── VolumeController.cs       # 音量控制（Windows API）
├── AlarmEditDialog.xaml      # 編輯對話框 UI
├── AlarmEditDialog.xaml.cs   # 編輯對話框邏輯（含完整 XML 註解）
├── SettingsDialog.xaml       # 全域設定對話框 UI
├── SettingsDialog.xaml.cs    # 全域設定對話框邏輯
├── MainWindow.xaml           # 主視窗 UI
├── MainWindow.xaml.cs        # 主視窗邏輯
├── App.xaml                  # 應用程式資源
└── AlarmClock.csproj         # 專案設定檔
```

## 使用說明

### 新增鬧鐘
1. 點擊「➕ 新增鬧鐘」按鈕
2. 輸入鬧鐘名稱
3. 選擇時間（小時和分鐘）
4. 拖動「有人使用時響鈴秒數」滑桿（1-60秒）
5. 拖動「無人使用時持續響鈴時間」滑桿（0-30分鐘）
   - 設為 0 = ♾️ 永不停止，直到手動關閉
   - 設為其他值 = 響鈴該分鐘數後自動停止
6. （選填）點擊「瀏覽...」上傳自訂音樂檔案
   - 支援格式：MP3, WAV, WMA, M4A
   - 檔案大小限制：5 MB
   - 可選擇複製到程式資料夾或使用原始路徑
7. 拖動「音量大小」滑桿（0-100%）
   - 設定此鬧鐘響鈴時的音量大小
   - 預設為 50%
8. 勾選「啟用此鬧鐘」
9. 點擊「儲存」

### 編輯鬧鐘
1. 點擊鬧鐘卡片右側的 ✏️ 按鈕
2. 修改設定
3. 點擊「儲存」

### 全域設定
1. 點擊「⚙️ 設定」按鈕
2. 調整「使用者活躍判斷時間」（10-300秒）
   - 此設定決定多久沒有鍵盤/滑鼠活動算作閒置
3. （選填）設定「音樂資料夾路徑」
   - 可指定自訂的音樂檔案存放位置
4. 點擊「儲存」

### 快速操作
- 🔔/🔕 按鈕：快速啟用/停用鬧鐘
- 🗑️ 按鈕：刪除鬧鐘（會有確認提示）
- 響鈴時點擊「關閉」：立即停止響鈴

## 設定檔位置

設定檔自動儲存在：
```
C:\Users\{你的使用者名稱}\AppData\Roaming\SmartAlarmClock\alarm_config.json
```

## 系統需求

- Windows 10/11
- .NET 9.0 SDK
- 支援 WPF 的系統

## 授權

MIT License
